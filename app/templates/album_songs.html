{% extends 'base.html' %}
{% set show_navbar = false %}

{% block title %}{{ album.album_title }} Songs{% endblock %}

{% block extra_links %}
<link rel="stylesheet" href="../static/songs.css"/>
{% endblock %}

{% block content %}
    <h1>{{ album.album_title }} Songs</h1>    
    <div class="songs-content">   
        {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        {% endif %}
        {% endwith %}

        <ul>
            {% for song in album.songs %}
                <li>
                    {{ song.song_title }}
                    <audio controls class="song-player">
                        <source src="{{ url_for('static', filename='audio/' + album.artist_id|string + '/' + album.album_title.replace(' ', '_').lower() + '/' + song.song_title + '.mp3') }}" type="audio/mpeg">
                    </audio>
                    {% if current_user.user_type == 'artist' %}
                        <form action="{{ url_for('delete_song', song_id=song.song_id) }}" method="post" onsubmit="return confirmDelete('{{ song.song_title }}');">
                            <button type="submit">Delete</button>
                        </form>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
    
  
{% endblock %}
